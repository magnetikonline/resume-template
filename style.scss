// -- constants --
$fontSizeBase: 1.1em;
$fontSizeHeadingMain: 1.5em;
$fontSizeHeadingSub: 1.2em;
$lineHeightBase: 1.5;

$respondWidthCenti: 700px;
$respondWidthMicro: 550px;

$pageWidthDefault: 90%;
$pageWidthMaximum: 760px;

$spacingBase: 15px;
$spacingHalf: (floor($spacingBase / 2));
$spacingQuarter: (floor($spacingBase / 4));

$topMenuInnerHeight: 30px;
$topMenuStackContentPageWidth: 650px;
$dateSectionLeftMargin: 110px;

$colorBodyAnchorHover: #b00;
$colorGrey: #d8d8d8;
$colorGreyDark: darken($colorGrey,30%);
$colorPageBackground: #f9f9f9;
$colorPageBodyShadow: #ccc;
$colorWhiteTopMenu: #eee;


// -- mixins --
@mixin respondWidthFrom($widthFrom) {
	@media screen and (min-width: $widthFrom + 1) { @content; }
}

@mixin respondWidthUpTo($widthUpTo) {
	@media screen and (max-width: #{$widthUpTo}) { @content; }
}

@mixin printOnly() {
	@media print { @content; }
}


// -- reset --
* {
	-moz-box-sizing: border-box;
	-webkit-box-sizing: border-box;
	box-sizing: border-box;
}

a,abbr,body,button,fieldset,form,h1,h2,h3,h4,h5,h6,iframe,img,label,legend,li,ol,p,td,th,ul {
	border: 0;
	font-size: 100%;
	font-weight: normal;
	list-style: none;
	margin: 0;
	outline: 0;
	padding: 0;
	text-decoration: none;
	vertical-align: baseline;
}

a,abbr {
	font-weight: inherit;
}

input,select,textarea {
	font-size: 100%;
	margin: 0;
}

// -- base --
body,button,input,select,td,textarea,th {
	color: #000;
	font-family: Verdana,Geneva,sans-serif;
}

body {
	background: $colorPageBackground;
	font-size: 62.5%;
	line-height: 1;

	@include respondWidthUpTo($respondWidthMicro) {
		// [.pagebody] is now flush to browser left/right edgess - blend with background color
		background: #fff;
	}

	@include printOnly() {
		background: #fff;
	}
}

// -- base - clear fix --
%clearFix:before,
%clearFix:after {
	content: '\0020';
	display: block;
	height: 0;
	overflow: hidden;
}

%clearFix:after {
	clear: both;
}

// -- base - hide --
%hide {
	left: -999em;
	overflow: hidden;
	position: absolute;
	top: -999em;
	width: 1em;
}

// -- placeholder - page frame --
%pageFrame {
	margin: 0 auto;
	width: $pageWidthMaximum;

	@include respondWidthFrom($respondWidthMicro) {
		// overrides the fixed page frame width used for IE8 which doesn't understand media queries
		max-width: $pageWidthMaximum;
		width: $pageWidthDefault;
	}

	@include respondWidthUpTo($respondWidthMicro) {
		width: auto;
	}
}

// -- top menu --
.topmenu {
	background: #000;
	font-size: $fontSizeBase;
	left: 0;
	padding: $spacingHalf 0;
	position: fixed;
	right: 0;
	top: 0;
	z-index: 100;

	@include printOnly() {
		display: none;
	}

	> .inner {
		@extend %pageFrame;
		line-height: $topMenuInnerHeight;

		@include respondWidthUpTo($respondWidthMicro) {
			margin: 0 $spacingHalf; // matches padding applied to [.pagebody]
		}
	}
}

// -- top menu - navigation --
.topmenu-navigation {
	float: left;

	@include respondWidthUpTo($topMenuStackContentPageWidth) {
		// stacked navigation/downloads
		display: block;
		float: none;
		text-align: right;
	}

	> .item {
		color: #fff;
		display: inline-block;
		white-space: nowrap; // keep IE8 happy by avoiding <li>'s clashing into each other

		> .link {
			color: $colorWhiteTopMenu;

			&:hover {
				text-decoration: underline;
			}
		}
	}
}

// -- top menu - download --
.topmenu-download {
	float: right;
	text-align: right;

	@include respondWidthUpTo($topMenuStackContentPageWidth) {
		// stacked navigation/downloads
		display: block;
		float: none;
	}

	> .item {
		display: inline-block;
		margin-left: $spacingHalf;

		> .msword,
		> .pdf {
			color: $colorWhiteTopMenu;
			display: block;
			padding-left: 20px; // allocation for file icon
			white-space: nowrap;

			&:hover {
				text-decoration: underline;
			}
		}

		// file icons
		> .msword {
			background: url(img/iconmsword.png) no-repeat 0 50%;
		}

		> .pdf {
			background: url(img/iconpdf.png) no-repeat 0 50%;
		}
	}
}

// -- jump to anchor point --
.jumpto {
	left: 0;
	position: absolute;
	top: -($topMenuInnerHeight + ($spacingBase * 2)); // offset by height of fixed [.topmenu] area

	@include respondWidthUpTo($topMenuStackContentPageWidth) {
		// stacked navigation/downloads
		top: -(($topMenuInnerHeight * 2) + ($spacingBase * 2));
	}
}

// -- page body --
.pagebody {
	@extend %pageFrame;
	background: #fff;
	box-shadow: 0 0 3px $colorPageBodyShadow;
	margin-bottom: ($spacingBase * 2);
	margin-top: ($topMenuInnerHeight + ($spacingBase * 2)); // clear fixed [.topmenu]
	padding: $spacingBase $spacingHalf;

	@include respondWidthUpTo($topMenuStackContentPageWidth) {
		// double height clearing of [.topmenu] when items are stacked
		margin-top: (($topMenuInnerHeight * 2) + ($spacingBase * 2));
	}

	@include respondWidthUpTo($respondWidthMicro) {
		box-shadow: none;
		padding: 0 $spacingHalf; // matches margin applied to [.topmenu > .inner]
	}

	@include printOnly() {
		box-shadow: none;
		margin: 0;
		max-width: none;
		padding: 0;
		width: auto;
	}

	// typography - headings
	h1,h2,h3,h4,h5 {
		font-weight: bold;
	}

	h1,h2 {
		background: $colorGrey;
		font-size: $fontSizeHeadingMain;
		margin-bottom: $spacingHalf;
		padding: $spacingHalf $spacingQuarter;
		position: relative; // to support [.jumpto] elements
	}

	h2 {
		margin-top: $spacingBase;
	}

	h3,h4 {
		font-size: $fontSizeHeadingSub;
		line-height: $lineHeightBase;
		margin-bottom: $spacingHalf;
	}

	h4 {
		color: $colorGreyDark;
		margin-bottom: $spacingBase;
	}

	h3 + h4 {
		margin-top: -$spacingHalf; // defeat margin-bottom of adjacent h3 element
	}

	h5 {
		font-size: $fontSizeBase;
		margin-bottom: $spacingHalf;
	}

	// typography - lists, paragraphs, anchors
	ul {
		margin: 0 0 $spacingBase ($spacingBase + $spacingHalf);
	}

	li ul {
		margin-bottom: 0;
	}

	p,li {
		font-size: $fontSizeBase;
		line-height: $lineHeightBase;
	}

	p {
		margin-bottom: $spacingBase;
	}

	li li,
	li p {
		font-size: 100%;
	}

	ul > li > p:last-child {
		margin: 0; // remove bottom margin for a final paragraph used within a list item
	}

	a {
		color: #000;
		text-decoration: underline;

		&:hover {
			color: $colorBodyAnchorHover;
		}
	}

	// last updated
	> .lastupdated {
		color: $colorGreyDark;
		margin: 0;
		text-align: right;
	}
}

// -- contact detail list --
.contactdetail {
	@extend %clearFix;

	> ul {
		float: left;
		margin: 0;
		padding-right: $spacingBase;
		width: 50%;

		@include respondWidthUpTo($respondWidthCenti) {
			// stack contact details
			float: none;
			padding: 0;
			width: auto;
		}

		// contact item label
		> li > strong {
			display: inline-block;
			width: 60px;
		}
	}
}

// -- technical skill set --
.technicalskillset > li {
	list-style: disc;
}

// -- dated experience/education sections --
.datesection {
	margin-left: $dateSectionLeftMargin;
	position: relative;
	z-index: 0; // below [.topmenu] (overkill I know)

	@include respondWidthUpTo($respondWidthMicro) {
		// stop [.date] to the left in margin layout
		margin: 0;
		position: static;
	}

	// date label
	> .date {
		color: #000;
		font-size: $fontSizeBase;
		font-weight: normal;
		left: -$dateSectionLeftMargin;
		line-height: (($fontSizeHeadingSub / ($fontSizeBase / 1em)) * $lineHeightBase) / 1em; // divide by 1em to strip unit (em) from values
		position: absolute;
		top: 0;
		white-space: nowrap;

		@include respondWidthUpTo($respondWidthMicro) {
			// stop [.date] to the left in margin layout
			font-weight: bold;
			line-height: $lineHeightBase;
			margin-top: -$spacingHalf;
			position: static;
		}

		> span {
			@extend %hide;
		}
	}

	// list item styling
	ul > li {
		list-style: disc;
	}

	// education
	> .education {
		@extend %clearFix;
		margin-left: 0;

		> li {
			float: left;
			list-style: none;
			padding-right: $spacingBase;
			white-space: nowrap;
			width: 50%;

			@include respondWidthUpTo($respondWidthCenti) {
				// stack items
				float: none;
				padding: 0;
				width: auto;
			}
		}
	}
}
